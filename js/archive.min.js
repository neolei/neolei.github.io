(function(){function b(){var d=0,e={},g;var f=window.location.search.substring(1);var c=f.split("&");for(d=0;d<c.length;d++){g=c[d].split("=");if(typeof e[g[0]]==="undefined"){e[g[0]]=g[1]}else{if(typeof e[g[0]]==="string"){e[g[0]]=[e[g[0]],g[1]]}else{e[g[0]].push(g[1])}}}return e}var a=(function(){var c=window.location.href.split("?")[0];return function(d){if(typeof d==="string"){window.history.replaceState(null,"",c+d)}else{window.history.replaceState(null,"",c)}}})();$(document).ready(function(){var p=$(".js-tags");var c=p.find(".tag-button");var n=p.find(".tag-button--all");var k=$(".js-result");var i=k.find("section");var e=[];var o=null;var j=[];var h=false;i.each(function(){e.push($(this).find(".item"))});function q(){var s,r=0;for(s=0;s<i.length;s++){j.push(r);r+=i.eq(s).find(".item").length}j.push(r)}function f(r){if(!r){return n}var s=c.filter('[data-encode="'+r+'"]');if(s.length===0){return n}return s}function l(r){if(r){r.addClass("focus");o&&!o.is(r)&&o.removeClass("focus");o=r}}function g(y,w){var z={},r;var v,u,t,s;for(v=0;v<e.length;v++){r=e[v];for(u=0;u<r.length;u++){if(y===""||y===undefined){z[v]||(z[v]={});z[v][u]=true}else{var x=r.eq(u).data("tags").split(",");for(t=0;t<x.length;t++){if(x[t]===y){z[v]||(z[v]={});z[v][u]=true;break}}}}}for(v=0;v<e.length;v++){z[v]&&i.eq(v).removeClass("d-none");z[v]||i.eq(v).addClass("d-none");for(u=0;u<e[v].length;u++){if(z[v]&&z[v][u]){e[v].eq(u).removeClass("d-none")}else{e[v].eq(u).addClass("d-none")}}}h||(k.removeClass("d-none"),h=true);if(w){l(w);s=w.attr("data-encode");if(s===""||typeof s!=="string"){a()}else{a("?tag="+s)}}else{l(f(y))}}var m=b(),d=m.tag;q();g(d);p.on("click","a",function(){g($(this).data("encode"),$(this))})})})();